import{aP as v,r}from"./vue-vendor-Bsazo-x0.js";import{c as u}from"./index-BtHs_jz9.js";const w=v("settings",()=>{const a=r({siteName:"Claude Relay Service",siteIcon:"",siteIconData:"",updatedAt:null}),i=r(!1),n=r(!1),d=async()=>{i.value=!0;try{const e=await u.get("/admin/oem-settings");return e&&e.success&&(a.value={...a.value,...e.data},s()),e}catch(e){throw console.error("Failed to load OEM settings:",e),e}finally{i.value=!1}},l=async e=>{n.value=!0;try{const t=await u.put("/admin/oem-settings",e);return t&&t.success&&(a.value={...a.value,...t.data},s()),t}catch(t){throw console.error("Failed to save OEM settings:",t),t}finally{n.value=!1}},m=async()=>{const e={siteName:"Claude Relay Service",siteIcon:"",siteIconData:"",updatedAt:null};return a.value={...e},await l(e)},s=()=>{if(a.value.siteName&&(document.title=`${a.value.siteName} - 管理后台`),a.value.siteIconData||a.value.siteIcon){const e=document.querySelector('link[rel="icon"]')||document.createElement("link");e.rel="icon",e.href=a.value.siteIconData||a.value.siteIcon,document.querySelector('link[rel="icon"]')||document.head.appendChild(e)}};return{oemSettings:a,loading:i,saving:n,loadOemSettings:d,saveOemSettings:l,resetOemSettings:m,applyOemSettings:s,formatDateTime:e=>e?new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"",validateIconFile:e=>{const t=[];return e.size>350*1024&&t.push("图标文件大小不能超过 350KB"),["image/x-icon","image/png","image/jpeg","image/jpg","image/svg+xml"].includes(e.type)||t.push("不支持的文件类型，请选择 .ico, .png, .jpg 或 .svg 文件"),{isValid:t.length===0,errors:t}},fileToBase64:e=>new Promise((t,c)=>{const o=new FileReader;o.onload=g=>t(g.target.result),o.onerror=c,o.readAsDataURL(e)})}});export{w as u};
